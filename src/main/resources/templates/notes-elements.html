<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">    
    <head th:replace="fragments/head :: head">
        <title>Fragment will be replaced</title>
    </head>        
    <body>        
        <nav class="navbar navbar-inverse" th:replace="fragments/header :: navbar">
            <!-- ============================================================================ -->
            <!-- This content is only used for static prototyping purposes (natural templates)-->
            <!-- and is therefore entirely optional, as this markup fragment will be replaced -->
            <!-- with "fragments/header.html" at runtime.                                     -->
            <!-- ============================================================================ -->
        </nav>
        <div class="container">
            <h1 th:text="${note.description}">Note description</h1>            
            <div class="list-group">
                <li class="list-group-item" th:each="noteElement,i : ${notesElements}">
                    <div class="row">
                        <div th:switch="${i.first}" class="col-sm-8">
                            <div th:case="true" class="btn-group">
				<button class="btn btn-default disabled" type="button">
                                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
				</button>                                    
				<button class="btn btn-default disabled" type="button">
                                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>					
				</button>
                            </div>
                            <div th:case="false" class="btn-group">
                                <button class="btn btn-default" type="button" th:onclick="'setForm(' + ${noteElement.id} + ',' + ${noteElement.sortElementVm.first} + ');'">
                                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
				</button>
				<button class="btn btn-default" type="button" th:onclick="'setForm(' + ${noteElement.id} + ',' + ${noteElement.sortElementVm.prev} + ');'">
                                    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>					
				</button>                                
                            </div>
                            <span th:text="${noteElement.description}">Description</span>
                        </div>											
                        <div class="col-sm-4">
                            <div th:switch="${i.last}" class="pull-right" th:inline="text">[[${#dates.format(noteElement.lastModified, 'dd.MM.yyyy')}]]
                                <div th:case="true" class="btn-group">
                                    <button class="btn btn-default disabled" type="button">
                                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                                    </button>
                                    <button class="btn btn-default disabled" type="button">
                                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                                    </button>		
                                </div>
                                <div th:case="false" class="btn-group">
                                    <button class="btn btn-default" type="button" th:onclick="'setForm(' + ${noteElement.id} + ',' + ${noteElement.sortElementVm.next} + ');'">
                                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                                    </button>
                                    <button class="btn btn-default" type="button" th:onclick="'setForm(' + ${noteElement.id} + ',' + ${noteElement.sortElementVm.last} + ');'">
                                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                                    </button>		
                                </div>                                
                            </div>
                        </div>				
                    </div>
		</li>                     
            <form id="swapForm" style="visibility: hidden" th:action="@{/notes-elements/swap}" method="post">		
		<input type="number" name="noteElementId" id="noteElementId"></input>		
		<input type="number" name="sortBy" id="sortBy"></input>
		<button type="submit">Отправить</button>
            </form>
            </div>            
            <script>
                function setForm(elementId, newSortBy) {			
                    document.getElementById('noteElementId').value = elementId;
                    document.getElementById('sortBy').value = newSortBy;
                    document.getElementById('swapForm').submit();
                }
            </script>
        </div>
        <footer th:replace="fragments/footer :: footer">Footer</footer>       
    </body>
</html>